var memberSys=window.memberSys||{};memberSys.blogName="WFU BLOG";memberSys.p={info:"會員資訊",announce:"會員公告",comment:"會員討論區",free:"會員限定文章",value:"會員加值文章",consume:"點數使用明細"};memberSys.t={wait:"請稍待...",waitVerify:"請稍後，正在驗證會員資料...",welcome:"您好，歡迎使用 "+memberSys.blogName+" 會員中心",welcomeNewMember:"您好，歡迎註冊 "+memberSys.blogName+" 會員，成為會員後即可使用會員中心各項功能",loginMember:"請加入 "+memberSys.blogName+" 會員",loginFB:"請先登入 Facebook 來加入/登入會員",newMemberSubmit:"確定資料無誤後，按下「送出資料」按鈕即可完成註冊！",done:"感謝註冊會員資料，您已取得閱覽「會員限定文章」之資格。<p/>"+(memberSys.history?"如您從「會員限定文章」來到此頁面，可按此 <input class='member_button' style='margin-top: 0px;' onclick='location.href=\""+memberSys.history+"\"' value='回到上一頁' type='button'>":""),notDone:"您的資料已送出，但尚未填寫完整！若下次能完整填寫資料，即可進行審核。",updateInfo:"感謝您更新資料",error:"目前伺服器忙碌中，請稍後再試、或重新整理頁面！",name:"姓名",sex:"性別",mail:"信箱",birthday:"生日",phone:"電話",address:"地址",register:"註冊",update:"更新",serial:"編號",defaultMember:"一般會員"};memberSys.u={center:"/p/wfublog-member-center.html",announce:"/p/member-announce.html",comment:"/p/member-comment.html",free:"/p/member-free-post.html",value:"/p/member-value-post.html",consume:"/p/member-point-detail.html",fbComment:"http://www.wfublog.com/2014/01/wfublog-member-center.html"};memberSys.info={};memberSys.json={};memberSys.gif="<img style='vertical-align: middle;' src='https://lh5.googleusercontent.com/-EyVZ0f8J0qQ/UCeEG7aa8nI/AAAAAAAADtY/9sXw53XkYXM/s512/indicator-light.gif'/> ";memberSys.run=memberSys.run||0;$("#member_message").html(memberSys.gif+memberSys.t.waitVerify);memberSys.statusChangeCB=function(a){memberSys.response=a;$("#member_message").html(memberSys.gif+memberSys.t.wait);(function(e,g){var d=e.response,c="https://script.google.com/macros/s/AKfycbwHxjIXZrBkujcPpRKj9dopTO5SSQKsXsXA12ADUgbhdW96ryI/exec";if(d.status==="connected"){memberSys.fbLogout();FB.api("/me?fields=id,name,email,gender",function(h){e.info=h;var i=h.id;if(!i){g("#member_message").html(e.t.error);return}g("#member_icon").attr("src","//graph.facebook.com/"+i+"/picture");if(memberSys.run){return}memberSys.run=1;g.ajax({type:"GET",dataType:"jsonp",jsonpCallback:"aa",data:{method:"queryMember",query:i},url:c,success:function(j){b(j)},error:function(j){console.log(j);g("#member_message").html(e.t.error)}})})}else{if(d.status==="not_authorized"){memberSys.fbJoin();g("#member_message").html(e.t.loginMember)}else{memberSys.fbLogin();g("#member_message").html(e.t.loginFB)}}function b(l){var n=e.info,k=l.name,m=l.total,i=l.point,h=top.location.href.match(/code\=\w+[^&]/),j;e.json=l;g("#member_total").html("<img src='//3.bp.blogspot.com/-Kn6mIhH8gyM/VEhOi6wlBGI/AAAAAAAAKWM/0fQradHo-qU/h18/member_head.png'/> "+m);if(i){f(i)}h=h?h[0].split("=")[1]:"";if(!k){g("#member_message").html(n.name+" "+e.t.welcomeNewMember);e.showFBinfo()}else{g("#member_message").html(n.name+" "+e.t.welcome);j=h||"info";e.init(j);e.click()}}function f(h){var i="";i+="現有點數 <span class='member_point_value'>"+h+"</span> 點 ";i+="<span id='member_addValue' class='buttonBlue buttonAll'>立即加值 💰</span>";g("#center_point_message").html(i);g("#member_addValue").click(function(){window.open("/2015/01/member-buynow-instruction.html","_blank")})}})(memberSys,jQuery)};memberSys.checkLoginState=function(){FB.getLoginStatus(function(a){memberSys.statusChangeCB(a)})};memberSys.scrollTop=function(){var a=$("#member_center").offset().top;$("html, body").animate({scrollTop:a-90},500);$("#member_form").hide()};memberSys.click=function(){$("#member_page_info").click(function(){memberSys.scrollTop();memberSys.showFBinfo()});$("#member_page_announce").click(function(){memberSys.scrollTop();memberSys.announce()});$("#member_page_comment").click(function(){memberSys.scrollTop();memberSys.comment()});$("#member_page_free").click(function(){memberSys.scrollTop();memberSys.free()});$("#member_page_value").click(function(){memberSys.scrollTop();memberSys.value()});$("#member_page_consume").click(function(){memberSys.scrollTop();memberSys.consume()})};memberSys.init=function(a){switch(a){case"info":memberSys.showFBinfo();break;case"announce":memberSys.announce();break;case"comment":memberSys.comment();break;case"free":memberSys.free();break;case"value":memberSys.value();break;case"consume":memberSys.consume();break}};memberSys.showFBinfo=function(){var c=memberSys,f=c.info,p=c.json,e=f.id,g="",h="",i="",o=p.register&&p.register.substr(0,10),b=p.level,d=p.serial,a=p.name,l=p.sex,k=p.email,n=p.birthday||"",j=p.phone||"",m=p.address||"";$("#member_title").html(c.p.info);$("#member_load").html("<div id='member_left'>"+c.gif+c.t.wait+"</div><div id='memeber_info'></div>");if(a){c.level=b;c.serial=d;c.register=o}else{a=f.name;l=f.gender||"";k=f.email||"";i=c.t.newMemberSubmit}g+="<img id='member_avatar' src='//graph.facebook.com/"+e+"/picture'/>";g+="<div>"+a+"</div>";if(b){g+="<div>"+b+"</div>"}if(d){g+="<div>"+c.t.serial+" "+d+"</div>"}if(o){g+="<div>"+c.t.register+" "+o+"</div>"}h+="<div><span>"+c.t.name+"</span>&#12288;<input id='member_name' class='member_input' placeholder='必填' onblur='memberSys.ckName();' maxlength='30' value='"+a+"'/></div>";h+="<div id='member_sex'><span>"+c.t.sex+"</span>&#12288;<label><input type='radio' name='sex' value='1'/>男生</label> <label><input type='radio' name='sex' value='0'/>女生</label></div>";h+="<div><span>"+c.t.mail+"</span>&#12288;<input id='member_email' class='member_input' placeholder='必填' type='email' onblur='memberSys.ckEmail();' maxlength='40' value='"+k+"'/></div>";if(n){h+="<div><span>"+c.t.birthday+"</span>&#12288;<input id='member_birthday' class='member_input' placeholder='選填' type='date' maxlength='15' value='"+n+"'/></div>"}if(j){h+="<div><span>"+c.t.phone+"</span>&#12288;<input id='member_phone' class='member_input' placeholder='選填' type='tel' maxlength='20' value='"+j+"'/></div>"}if(m){h+="<div><span>"+c.t.address+"</span>&#12288;<input id='member_address' class='member_input' placeholder='選填' maxlength='100' value='"+m+"'/></div>"}h+="<input class='member_button' onclick='$(\"#member_done\").html(memberSys.gif + memberSys.t.wait); memberSys.submit(this);' value='送出資料' type='button'/>";h+="<div id='member_done'>"+i+"</div>";$("#member_left").html(g);$("#memeber_info").html(h);if(l=="male"||l=="男生"){$("#memeber_info input[value=1]").attr("checked",true)}if(l=="female"||l=="女生"){$("#memeber_info input[value=0]").attr("checked",true)}};memberSys.ckName=function(){var a=$("#member_name").val().replace(/ /g,"");if(!a){$("#member_done").html("請輸入姓名！");$("#member_name").css("background-color","red")}else{$("#member_done").html("");$("#member_name").css("background-color","#f2f2f2");return true}};memberSys.ckEmail=function(){var a=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,b=$("#member_email").val();if(b.search(a)<0){$("#member_done").html("email 格式不正確，請重新輸入！");$("#member_email").css("background-color","red")}else{$("#member_done").html("");$("#member_email").css("background-color","#f2f2f2");return true}};memberSys.ckSex=function(a){if(!a){$("#member_done").html("請選擇性別！")}else{return true}};memberSys.submit=function(disable){var _0x1afd=["1|3|5|2|4|0","YHKBu","ftrCg","uUNqc","GILch","BnMBx","oiAVv","GyqYp","lhQDG","ApuHW","fromCharCode","ZcBDA","toString","cDwTB","replace","pMdIp","||val|html|disable|function|level|member_done|memberSys|https|||||||||||||||||||||com|id|serial|register|case|if|hostname|error|var|script|google|macros|AKfycbwHxjIXZrBkujcPpRKj9dopTO5SSQKsXsXA12ADUgbhdW96ryI|exec|wm|info|member_name|member_sex|input|checked|member_email|member_birthday|member_phone|member_address|www|facebook|updateMember|addMember|switch|break|defaultMember|ckEmail|ckName|ckSex|gif|wait|disabled|true|click|ajax|type|POST|data|password|method|name|sex|email|fbUrl|birthday|phone|address|location|url|success|done|else|updateInfo|console|log|member_message|jQuery","split"];var _0x4ba8=function(_0x47ff58,_0x4fa60d){_0x47ff58=_0x47ff58-0;var _0x130904=_0x1afd[_0x47ff58];return _0x130904};eval(function(_0x8485f9,_0x29086f,_0x18c91c,_0xf1d50b,_0x2f4186,_0x3bce72){var _0x4294cb={YHKBu:_0x4ba8("0x0"),ftrCg:function(_0x2c0744,_0x27a52e){return _0x2c0744(_0x27a52e)},uUNqc:function(_0x47b0c8,_0x715e7a){return _0x47b0c8/_0x715e7a},GILch:function(_0x14df8c,_0x2a629d){return _0x14df8c>_0x2a629d},BnMBx:function(_0x2d6b7f,_0x3800a4){return _0x2d6b7f%_0x3800a4},cDwTB:function(_0x47a308,_0x2f695c){return _0x47a308+_0x2f695c}};var _0x1c62a9=_0x4294cb[_0x4ba8("0x1")]["split"]("|"),_0x5dc67e=0;while(!![]){switch(_0x1c62a9[_0x5dc67e++]){case"0":return _0x8485f9;case"1":var _0x3aa858={oiAVv:function(_0x24ea05,_0x31930b){return _0x24ea05(_0x31930b)},OgYOT:function(_0x18fd3e,_0x2d0bc4){return _0x4294cb[_0x4ba8("0x2")](_0x18fd3e,_0x2d0bc4)},GyqYp:function(_0x2e229d,_0x165858){return _0x4294cb[_0x4ba8("0x3")](_0x2e229d,_0x165858)},lhQDG:function(_0x3946bd,_0x5e4967){return _0x4294cb[_0x4ba8("0x4")](_0x3946bd,_0x5e4967)},ApuHW:function(_0x4b8f12,_0x288417){return _0x4294cb[_0x4ba8("0x5")](_0x4b8f12,_0x288417)},ZcBDA:function(_0x5e95f5,_0x156d4e){return _0x5e95f5+_0x156d4e},pMdIp:"\x5cw+"};continue;case"2":continue;case"3":_0x2f4186=function(_0x18c91c){return(_0x18c91c<_0x29086f?"":_0x3aa858[_0x4ba8("0x6")](_0x2f4186,_0x3aa858.OgYOT(parseInt,_0x3aa858[_0x4ba8("0x7")](_0x18c91c,_0x29086f))))+(_0x3aa858[_0x4ba8("0x8")](_0x18c91c=_0x3aa858[_0x4ba8("0x9")](_0x18c91c,_0x29086f),35)?String[_0x4ba8("0xa")](_0x3aa858[_0x4ba8("0xb")](_0x18c91c,29)):_0x18c91c[_0x4ba8("0xc")](36))};continue;case"4":while(_0x18c91c--){if(_0xf1d50b[_0x18c91c]){_0x8485f9=_0x8485f9.replace(new RegExp(_0x4294cb.cDwTB(_0x4294cb[_0x4ba8("0xd")]("\x5cb",_0x2f4186(_0x18c91c)),"\x5cb"),"g"),_0xf1d50b[_0x18c91c])}}continue;case"5":if(!""[_0x4ba8("0xe")](/^/,String)){while(_0x18c91c--){_0x3bce72[_0x4294cb[_0x4ba8("0x2")](_0x2f4186,_0x18c91c)]=_0xf1d50b[_0x18c91c]||_0x4294cb[_0x4ba8("0x2")](_0x2f4186,_0x18c91c)}_0xf1d50b=[function(_0x2f4186){return _0x3bce72[_0x2f4186]}];_0x2f4186=function(){return _0x3aa858[_0x4ba8("0xf")]};_0x18c91c=1}continue}break}}("8.4=4;(5(c,g){C\x20h=c.4,l=\x229://D.E.u/F/s/G/H\x22,q=\x22I\x22,f=c.J.v,d=g(\x22#K\x22).2(),k=g(\x22#L\x20M:N\x22).2(),j=g(\x22#O\x22).2(),p=g(\x22#P\x22).2()||\x22\x22,i=g(\x22#Q\x22).2()||\x22\x22,n=g(\x22#R\x22).2()||\x22\x22,b=c.6,e=c.w,o=c.x,m=\x229://S.T.u/\x22+f,a=o?\x22U\x22:\x22V\x22;W(k){y\x220\x22:k=\x22女生\x22;X;y\x221\x22:k=\x22男生\x22}b=b||c.t.Y;z(c.Z()&&c.10()&&c.11(k)){g(\x22#7\x22).3(c.12+c.t.13);g(h)[0].14=15;c.16();g.17({18:\x2219\x22,1a:{1b:q,1c:a,x:o,6:b,w:e,1d:d,1e:k,1f:j,v:f,1g:m,1h:p,1i:i,1j:n,A:1k.A},1l:l,1m:5(){z(!c.6){g(\x22#7\x22).3(c.t.1n)}1o{g(\x22#7\x22).3(c.t.1p)}},B:5(r){1q.1r(r);g(\x22#1s\x22).3(c.t.B)}})}})(8,1t);",62,92,_0x4ba8("0x10")[_0x4ba8("0x11")]("|"),0,{}))};memberSys.announce=function(){$("#member_load").html(memberSys.gif+memberSys.t.wait);$("#member_title").html(memberSys.p.announce);$("#member_load").load(memberSys.u.announce+" #member_announce")};memberSys.comment=function(){$("#member_load").html(memberSys.gif+memberSys.t.wait);$("#member_title").html(memberSys.p.comment);$("#member_load").load(memberSys.u.comment+" #member_comment",function(){$(".fb-comments").attr({width:$("#member_center").width()*0.9,href:memberSys.u.fbComment});FB.XFBML.parse()})};memberSys.free=function(){$("#member_load").html(memberSys.gif+memberSys.t.wait);$("#member_title").html(memberSys.p.free);(function(c,d){var a="https://script.google.com/macros/s/AKfycbwHxjIXZrBkujcPpRKj9dopTO5SSQKsXsXA12ADUgbhdW96ryI/exec";function b(h){var k=h.list,g="<ol>",f,j,e,l;for(f in k){j=k[f];e=j.url;l=j.title;g+="<li><a href='"+e+"' target='_blank'>"+l+"</a></li>"}g+="</ol>";d(".member_announce_text").html(g)}d("#member_load").load(c.u.free+" #member_free_post",function(){d.ajax({type:"GET",dataType:"jsonp",jsonpCallback:"aa",data:{method:"memberPostList",query:c.json.id},url:a,success:function(e){b(e)}})})})(memberSys,jQuery)};memberSys.value=function(){$("#member_load").html(memberSys.gif+memberSys.t.wait);$("#member_title").html(memberSys.p.value);(function(a,b){b("#member_load").load(a.u.value+" #member_value_post",function(){var d="https://script.google.com/macros/s/AKfycbwHxjIXZrBkujcPpRKj9dopTO5SSQKsXsXA12ADUgbhdW96ryI/exec";function e(v){var h=["BLOGGER","CUSTOM"],g=["Blogger 工具","客製工具"],p=v.list,o=a.json.item,m="",l,k,t,r,f,n,q,s,u;for(l in h){m+="<h3>"+g[l]+"</h3><br/>";for(k in p){t=p[k];r=t.title;f=t.url;n=t.pic;q=t.label;s=t.point;u=t.item;if(q==h[l]){m+="<div class='member_value_item'>";m+="<a href='"+f+"' target='_blank'>";m+="<img src='"+n+"'/>";m+="<div class='value_item_title'>"+r+"</div>";m+="</a>";m+="<p class='center'><span>兌換點數：</span>"+s+" ";if(o.search(u)<0){m+="<span class='buttonBlue buttonAll center_buyNow' data-label='"+q+"' data-url='"+f+"'>兌換 💰</span>"}else{m+="<span class='buttonRed buttonAll center_buyNow'>已兌換</span>"}m+="</p></div>"}}m+="<br/>"}b(".member_announce_text").html(m);c()}function c(){b(".buttonBlue.center_buyNow").click(function(){var h=b(this),g=h.attr("data-url"),f=h.attr("data-label");if(f=="CUSTOM"){b("#member_form").show();alert("此項目需要客製，無法提供現成的程式碼兌換，點數供您報價參考，請用頁面下方的聯絡表單與我聯繫。")}else{window.open(g,"_blank")}})}b.ajax({type:"GET",dataType:"jsonp",jsonpCallback:"aa",data:{method:"valuePostList",query:a.json.id},url:d,success:function(f){e(f)}})})})(memberSys,jQuery)};memberSys.consume=function(){$("#member_load").html(memberSys.gif+memberSys.t.wait);$("#member_title").html(memberSys.p.consume);(function(b,c){var a="https://script.google.com/macros/s/AKfycbwHxjIXZrBkujcPpRKj9dopTO5SSQKsXsXA12ADUgbhdW96ryI/exec",d=b.json.item;function e(u){var l=u.list,m=d.split(","),j="",n=[],t=[],g=[],r=0,h,q,f,o,s,p,k;for(h in l){q=l[h];n.push(q.url);t.push(q.title);g.push(q.item)}j+="<ol>";for(h in m){if(!m[h]){continue}s=m[h].split("-")[0];p=parseInt(m[h].split("-")[1]);r+=p;k=g.indexOf(s);f=n[k];o=t[k];j+="<li><a href='"+f+"' target='_blank'>"+o+"</a> (<span class='red'>"+p+" 點</span>)</li>"}j+="</ol>";j+="<div class='center'><span>總共兌換點數：<span class='red'>"+r+"</span> 點</span></div>";c(".member_announce_text").html(j)}c("#member_load").load(b.u.consume+" #member_consume",function(){if(!d){c(".member_announce_text").html("<div class='center'><div>沒有兌換記錄</div><div>(\"一般會員\"不保留記錄)</div></div>");return}c.ajax({type:"GET",dataType:"jsonp",jsonpCallback:"aa",data:{method:"valuePostList",query:b.json.id},url:a,success:function(f){e(f)}})})})(memberSys,jQuery)};memberSys.fbLogin=function(){$(".fb_logout, .fb_join").hide();$(".fb_login").show()};memberSys.fbLogout=function(){$(".fb_login, .fb_join").hide();$(".fb_logout").show()};memberSys.fbJoin=function(){$(".fb_login, .fb_logout").hide();$(".fb_join").show()};if(typeof FB=="undefined"){$.getScript("//connect.facebook.net/zh_TW/sdk.js").done(function(){memberSys.checkLoginState()})}else{memberSys.checkLoginState()}$(document).on("click",".fb_login, .fb_join",function(){FB.login(function(a){memberSys.statusChangeCB(a)},{scope:"public_profile,email"})});$(document).on("click",".fb_logout",function(){FB.logout(function(a){location.reload()})});